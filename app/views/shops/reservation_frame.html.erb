<div class="container">
  <p id="register"></p>
  <p class="text-center"><%= @shop.name %>の予約カレンダー</p>
  <%= link_to "予約開放枠の設定", s_modal_path, remote: true, class: "btn btn-primary" %>

  <!--- 予約カレンダーの表示 --->
  <div class="table">
    <table>
      <thead>
        <tr class="thead-dark">
          <th>
            <% session[:day] = @available_days %>
            <% if @t.first.to_date > Date.today%>
            <%= link_to "前の週へ", s_prev_path(@shop, today:@today) %>
            <% end %>
          </th>
          <th colspan=6 class="text-center"><%= @year_month %></th>
          <th>
            <%= link_to "次の週へ", s_next_path(@shop, today:@today) %>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="thead-light">
          <th></th>
          <% @week.each do |day| %>
          <th class="text-center"><%= day.mday %><%= "(" + %w[日 月 火 水 木 金 土][day.wday] + ")" %></th>
          <% end %>
        </tr>
        <% @able_time.each do |hour| %>
        <tr>
          <th id="calender_body"><%= hour %>:00</th>
          <% 7.times do %>
          <% cal_date = @t.slice!(0)%>
          <% if @available_days && @available_days.include?(cal_date) %>
          <td class="text-center">○</td>
          <% else %>
          <td class="text-center">x</td>
          <% end%>
          <% end %>
          <% end %>
        </tr>
      </tbody>
    </table>

  </div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>